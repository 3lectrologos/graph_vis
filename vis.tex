\documentclass{standalone}
\PassOptionsToPackage{dvipsnames}{xcolor}
\usepackage{tikz}
\usetikzlibrary{decorations}
\usepackage{pgfplotstable}
\usepackage{etoolbox}


% Parameters
\def\axisa{\LARGE$a$}
\def\axisb{\LARGE$b$}
\newcommand\timetext[1]{\LARGE$t=#1$}

\def\inputname{HeFlatRight2}
\def\xstretch{30}
\def\yoff{-0.8}
\def\ystretch{5}
\def\minnodesize{5}
\def\nodemul{15}
\def\minwidth{0.5}
\def\widthmulti{1}
\colorlet{locol}{darkgray!30!white}
\colorlet{hicol}{RoyalPurple}

% Sequential color map
\definecolor{col0}{HTML}{ffffcc}
\definecolor{col1}{HTML}{ffeda0}
\definecolor{col2}{HTML}{fed976}
\definecolor{col3}{HTML}{000000}
\definecolor{col4}{HTML}{fd8d3c}
\definecolor{col5}{HTML}{fc4e2a}
\definecolor{col6}{HTML}{e31a1c}
\definecolor{col7}{HTML}{004d80}
\definecolor{col8}{HTML}{800026}

% Qualitative color map
%\definecolor{col0}{HTML}{a6cee3}
%\definecolor{col1}{HTML}{1f78b4}
%\definecolor{col2}{HTML}{b2df8a}
%\definecolor{col3}{HTML}{33a02c}
%\definecolor{col4}{HTML}{fb9a99}
%\definecolor{col5}{HTML}{e31a1c}
%\definecolor{col6}{HTML}{fdbf6f}
%\definecolor{col7}{HTML}{ff7f00}
%\definecolor{col8}{HTML}{cab2d6}

\newcommand\col[1]{col#1}

% https://tex.stackexchange.com/questions/14283/stroke-with-variable-thickness
\makeatletter

\pgfkeys{/pgf/decoration/.cd,
	start color/.store in =\startcolor,
	end color/.store in   =\endcolor,
	start width/.store in =\startwidth,
	end width/.store in   =\endwidth
}

\pgfdeclaredecoration{width and color change}{initial}{
	\state{initial}[width=0pt, next state=line, persistent precomputation={%
		\pgfmathdivide{50}{\pgfdecoratedpathlength}%
		\let\increment=\pgfmathresult%
		\def\x{0}%
	}]{}
	\state{line}[width=0.5pt,
	  persistent postcomputation={%
		\pgfmathadd@{\x}{\increment}%
		\let\x=\pgfmathresult%
	}]{%
		\pgfsetlinewidth{\endwidth*(\x/100)+\startwidth*(100-\x)/100}%
		%\pgfsetlinewidth{\pgflinewidth}%
		\pgfsetarrows{-}%
		\pgfpathmoveto{\pgfpointorigin}%
		\pgfpathlineto{\pgfqpoint{0.75pt}{0pt}}%
		\pgfsetstrokecolor{\endcolor!\x!\startcolor}%
		\pgfusepath{stroke}%
	}
	\state{final}{%
		\pgfsetlinewidth{\endwidth}%
		\pgfpathmoveto{\pgfpointorigin}%
        %\pgfpathlineto{\pgfpointdecoratedpathlast\advance\pgf@... by2.0\pgflinewidth}%
		\color{\endcolor!\x!\startcolor}%
		\pgfusepath{stroke}% 
	}
}

\makeatother


\pgfplotstableread{\inputname_nodes.txt}\ntable
\pgfplotstablegetrowsof{\ntable}
\pgfmathsetmacro{\nrows}{\pgfplotsretval-1}
\pgfplotstableread{\inputname_times.txt}\ttable
\pgfplotstablegetrowsof{\ttable}
\pgfmathsetmacro{\trows}{\pgfplotsretval-1}

\newtoggle{plotedges}
\toggletrue{plotedges}
\iftoggle{plotedges}{%
\pgfplotstableread{\inputname_edges.txt}\etable
\pgfplotstablegetrowsof{\etable}
\pgfmathsetmacro{\erows}{\pgfplotsretval-1}
}


\begin{document}
\begin{tikzpicture}[
  scale=1,
  nodestyle/.style={circle,draw=none,line width=0.3pt,minimum size=0pt,inner sep=0, anchor=center, opacity=0.3},
  edgestyle/.style={opacity=0.3},
  axisstyle/.style={darkgray!30!white, line width=0.6pt}
  ]
  
  \foreach \row in {0,...,\trows} {
	\node[minimum size=0,inner sep=0] (s\row) at (-0*\xstretch, \yoff-\ystretch*\row) {};
	\node[minimum size=0,inner sep=0] (e\row) at (1*\xstretch, \yoff-\ystretch*\row) {};
	\draw[axisstyle] (s\row) -- (e\row);
	\node[anchor=south] (a\row) at (-0*\xstretch, \yoff-0.8-\ystretch*\row) {\axisa};
	\node[anchor=south] (b\row) at (1*\xstretch, \yoff-0.8-\ystretch*\row) {\axisb};
	\pgfplotstablegetelem{\row}{[index]0}\of\ttable
	\xdef\time{\pgfplotsretval}
	\node[anchor=east] (foo\row) at (-1,\yoff -\ystretch*\row) {\timetext{\time}};
  }

  \foreach \row in {0,...,\nrows} {
	\pgfplotstablegetelem{\row}{[index]0}\of\ntable
	\xdef\noderow{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]1}\of\ntable
	\xdef\nodecol{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]2}\of\ntable
	\xdef\nodepos{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]3}\of\ntable
	\xdef\nodecolor{\pgfplotsretval}
	\colorlet{nodecol}{\col{\nodecolor}}
	%\colorlet{nodecol}{hicol!\nodecolor!locol}
	\pgfplotstablegetelem{\row}{[index]4}\of\ntable
	\xdef\nodesize{\minnodesize+\nodemul*\pgfplotsretval}
	\node [nodestyle,fill=nodecol,minimum size=\nodesize] (\noderow/\nodecol) at (\xstretch*\nodepos, \yoff-\ystretch*\noderow) {};
  }

  \iftoggle{plotedges}{%
  \foreach \row in {0,...,\erows} {
	\pgfplotstablegetelem{\row}{[index]0}\of\etable
	\xdef\srow{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]1}\of\etable
	\xdef\scol{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]2}\of\etable
	\xdef\trow{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]3}\of\etable
	\xdef\tcol{\pgfplotsretval}
	% Colors
	\pgfplotstablegetelem{\row}{[index]4}\of\etable
	\xdef\sclr{\pgfplotsretval}
	\colorlet{cstart}{\col{\sclr}}
	\pgfplotstablegetelem{\row}{[index]5}\of\etable
	\xdef\tclr{\pgfplotsretval}
	\colorlet{cend}{\col{\tclr}}
	%\colorlet{cend}{hicol!\tclr!locol}
	% Widths
	\pgfplotstablegetelem{\row}{[index]6}\of\etable
	\xdef\swidth{\minwidth + \widthmulti*\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]7}\of\etable
	\xdef\twidth{\minwidth + \widthmulti*\pgfplotsretval}
	%\draw [decoration={width and color change, start color=darkgray!80!white, end color=darkgray!80!white, start width=1.5*\swidth, end width=1.5*\twidth}, decorate] (\srow/\scol.center) to [out=-90,in=90,looseness=0.8] (\trow/\tcol.center);
	%\draw [edgestyle, color=cstart, line width=1.5*\twidth] (\srow/\scol) to [out=-90,in=90,looseness=0.4] (\trow/\tcol);
	\draw [edgestyle, smooth, color=cstart, line width=1.5*\twidth] (\srow/\scol) -- (\trow/\tcol);
	%\draw [decoration={width and color change, start color=cstart, end color=cend, start width=\swidth, end width=\twidth}, decorate] (\srow/\scol.center) to [out=-90,in=90,looseness=0.8] (\trow/\tcol.center);
  }
  }

  \foreach \rowi in {0,...,\trows} {
  \pgfmathsetmacro\row{int(\rowi + 1)}
  \begin{axis}[%
    at={(0,-\row*5cm)},
    axis line style={darkgray!30!white, line width=0.3pt},
    axis background/.style={fill=darkgray!3!white, opacity=0.8},
    width=12.42in,
    height=2in,
    xmin=-2,
    xmax=2.8,
    ymin=-1.2,
    ymax=1.3,
    ticks=none,
    clip=true
  ]
  \addplot[%
    mark=none,
    darkgray!70!white,
    line width=3pt
  ] table[col sep=comma] {\inputname_xy_\row.txt};

  \addplot[%
    only marks,
    mark=square*,
    mark size=5pt,
    mark options={darkgray}
  ] table[col sep=comma] {\inputname_data.txt};
  \end{axis}
}

\end{tikzpicture}
\end{document}