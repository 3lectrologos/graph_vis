\documentclass{standalone}
\PassOptionsToPackage{dvipsnames}{xcolor}
\usepackage{tikz}
\usetikzlibrary{decorations,positioning,fadings,through}
\usepackage{pgfplotstable}
\usepackage{etoolbox}


% Parameters
\newcommand\timetext[1]{\LARGE$t=#1$}

\def\inputname{FlatInitRightSign40}
\def\xstretch{22}
\def\xstretchcm{\xstretch cm}
\def\ystretch{6}
\def\minnodesize{5}
\def\nodemul{15}
\def\minwidth{0.5}
\def\widthmulti{1}
\colorlet{locol}{darkgray!30!white}
\colorlet{hicol}{RoyalPurple}

% Sequential color map
\definecolor{col0}{HTML}{ffffcc}
\definecolor{col1}{HTML}{ffeda0}
\definecolor{col2}{HTML}{fed976}
\definecolor{col3}{HTML}{000000}
\definecolor{col4}{HTML}{fd8d3c}
\definecolor{col5}{HTML}{fc4e2a}
\definecolor{col6}{HTML}{e31a1c}
\definecolor{col7}{HTML}{004d80}
\definecolor{col8}{HTML}{800026}

\colorlet{lightgray}{gray!10!white}

% Qualitative color map
%\definecolor{col0}{HTML}{a6cee3}
%\definecolor{col1}{HTML}{1f78b4}
%\definecolor{col2}{HTML}{b2df8a}
%\definecolor{col3}{HTML}{33a02c}
%\definecolor{col4}{HTML}{fb9a99}
%\definecolor{col5}{HTML}{e31a1c}
%\definecolor{col6}{HTML}{fdbf6f}
%\definecolor{col7}{HTML}{ff7f00}
%\definecolor{col8}{HTML}{cab2d6}

\newcommand\col[1]{col#1}

% https://tex.stackexchange.com/questions/14283/stroke-with-variable-thickness
\makeatletter

\pgfkeys{/pgf/decoration/.cd,
	start color/.store in =\startcolor,
	end color/.store in   =\endcolor,
	start width/.store in =\startwidth,
	end width/.store in   =\endwidth
}

\pgfdeclaredecoration{width and color change}{initial}{
	\state{initial}[width=0pt, next state=line, persistent precomputation={%
		\pgfmathdivide{50}{\pgfdecoratedpathlength}%
		\let\increment=\pgfmathresult%
		\def\x{0}%
	}]{}
	\state{line}[width=0.5pt,
	  persistent postcomputation={%
		\pgfmathadd@{\x}{\increment}%
		\let\x=\pgfmathresult%
	}]{%
		\pgfsetlinewidth{\endwidth*(\x/100)+\startwidth*(100-\x)/100}%
		%\pgfsetlinewidth{\pgflinewidth}%
		\pgfsetarrows{-}%
		\pgfpathmoveto{\pgfpointorigin}%
		\pgfpathlineto{\pgfqpoint{0.75pt}{0pt}}%
		\pgfsetstrokecolor{\endcolor!\x!\startcolor}%
		\pgfusepath{stroke}%
	}
	\state{final}{%
		\pgfsetlinewidth{\endwidth}%
		\pgfpathmoveto{\pgfpointorigin}%
        %\pgfpathlineto{\pgfpointdecoratedpathlast\advance\pgf@... by2.0\pgflinewidth}%
		\color{\endcolor!\x!\startcolor}%
		\pgfusepath{stroke}% 
	}
}

\makeatother


\pgfplotstableread{data/\inputname/nodes.txt}\ntable
\pgfplotstablegetrowsof{\ntable}
\pgfmathsetmacro{\nrows}{\pgfplotsretval-1}
\pgfplotstableread{data/\inputname/times.txt}\ttable
\pgfplotstablegetrowsof{\ttable}
\pgfmathsetmacro{\trows}{\pgfplotsretval-1}
\pgfplotstableread{data/\inputname/options.txt}\opttable

\newtoggle{plotedges}
\toggletrue{plotedges}
\iftoggle{plotedges}{%
\pgfplotstableread{data/\inputname/edges.txt}\etable
\pgfplotstablegetrowsof{\etable}
\pgfmathsetmacro{\erows}{\pgfplotsretval-1}
}


\begin{document}
\begin{tikzpicture}[
  scale=1,
  nodestyle/.style={circle,draw=none,line width=0.3pt,minimum size=0pt,inner sep=0, anchor=center,opacity=0.3},
  edgestyle/.style={opacity=0.3},
  axisstyle/.style={|-|,darkgray!50!white,line width=1.6pt}
  ]
  
  \pgfplotstablegetelem{0}{[index]0}\of\opttable
  \xdef\xmin{\pgfplotsretval}
  \pgfplotstablegetelem{0}{[index]1}\of\opttable
  \xdef\xmax{\pgfplotsretval}
  \pgfplotstablegetelem{0}{[index]2}\of\opttable
  \xdef\xlo{\pgfplotsretval}
  \pgfplotstablegetelem{0}{[index]3}\of\opttable
  \xdef\xhi{\pgfplotsretval}
  \pgfplotstablegetelem{0}{[index]4}\of\opttable
  \xdef\ylo{\pgfplotsretval}
  \pgfplotstablegetelem{0}{[index]5}\of\opttable
  \xdef\yhi{\pgfplotsretval}
  
  \foreach \row in {0,...,\trows} {
	\node[minimum size=0,inner sep=0] (s\row) at (-0*\xstretchcm, -\ystretch*\row) {};
	\node[minimum size=0,inner sep=0] (e\row) at (1*\xstretchcm, -\ystretch*\row) {};
	\draw[axisstyle] (s\row) -- (e\row);
	\node[anchor=south] (a\row) at (0, -1.0-\ystretch*\row) {\LARGE$\xmin$};
	\node[anchor=south] (b\row) at (\xstretchcm, -1.0-\ystretch*\row) {\LARGE$\xmax$};
	\pgfplotstablegetelem{\row}{[index]0}\of\ttable
	\xdef\time{\pgfplotsretval}
	\node[anchor=east] (foo\row) at (-0.5, -\ystretch*\row) {\timetext{\time}};
  }

  \foreach \row in {0,...,\nrows} {
	\pgfplotstablegetelem{\row}{[index]0}\of\ntable
	\xdef\noderow{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]1}\of\ntable
	\xdef\nodecol{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]2}\of\ntable
	\xdef\nodepos{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]3}\of\ntable
	\xdef\nodecolor{\pgfplotsretval}
	\colorlet{nodecol}{\col{\nodecolor}}
	%\colorlet{nodecol}{hicol!\nodecolor!locol}
	\pgfplotstablegetelem{\row}{[index]4}\of\ntable
	\xdef\nodesize{\minnodesize+\nodemul*\pgfplotsretval}
	\node [nodestyle,fill=nodecol,minimum size=\nodesize] (\noderow/\nodecol) at (\xstretchcm*\nodepos, -\ystretch*\noderow) {};
  }

  \iftoggle{plotedges}{%
  \foreach \row in {0,...,\erows} {
	\pgfplotstablegetelem{\row}{[index]0}\of\etable
	\xdef\srow{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]1}\of\etable
	\xdef\scol{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]2}\of\etable
	\xdef\trow{\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]3}\of\etable
	\xdef\tcol{\pgfplotsretval}
	% Colors
	\pgfplotstablegetelem{\row}{[index]4}\of\etable
	\xdef\sclr{\pgfplotsretval}
	\colorlet{cstart}{\col{\sclr}}
	\pgfplotstablegetelem{\row}{[index]5}\of\etable
	\xdef\tclr{\pgfplotsretval}
	\colorlet{cend}{\col{\tclr}}
	%\colorlet{cend}{hicol!\tclr!locol}
	% Widths
	\pgfplotstablegetelem{\row}{[index]6}\of\etable
	\xdef\swidth{\minwidth + \widthmulti*\pgfplotsretval}
	\pgfplotstablegetelem{\row}{[index]7}\of\etable
	\xdef\twidth{\minwidth + \widthmulti*\pgfplotsretval}
	%\draw [decoration={width and color change, start color=darkgray!80!white, end color=darkgray!80!white, start width=1.5*\swidth, end width=1.5*\twidth}, decorate] (\srow/\scol.center) to [out=-90,in=90,looseness=0.8] (\trow/\tcol.center);
	%\draw [edgestyle, color=cstart, line width=1.5*\twidth] (\srow/\scol) to [out=-90,in=90,looseness=0.4] (\trow/\tcol);
	\draw [edgestyle, smooth, color=cstart, line width=1.5*\twidth] (\srow/\scol) -- (\trow/\tcol);
	%\draw [decoration={width and color change, start color=cstart, end color=cend, start width=\swidth, end width=\twidth}, decorate] (\srow/\scol.center) to [out=-90,in=90,looseness=0.8] (\trow/\tcol.center);
  }
  }

  \foreach \row in {0,...,\trows} {
  \pgfmathsetmacro\xat{(\xlo-\xmin)*\xstretch/(\xmax-\xmin)}
  \pgfmathsetmacro\xwidth{(\xhi-\xlo)*\xstretch/(\xmax-\xmin)}
  \begin{axis}[%
    anchor=south west,
    at={(\xat*1cm,-\row*\ystretch cm + 0.5cm)},
    axis y line=none,
    axis line style={
    	Goldenrod!30!black,
    	line width=1.6pt
    },
    axis background/.style={fill=white!10!lightgray, opacity=0.8},
    width=\xwidth*1cm,
    height=3.5cm,
    xmin=\xlo,
    xmax=\xhi,
    ymin=\ylo,
    ymax=\yhi,
    ticks=none,
    restrict y to domain=-20:20,
    clip mode=individual,
    clip=true,
    scale only axis
  ]
  
  \addplot[%
    only marks,
    mark=square*,
    mark size=5pt,
    mark options={darkgray}
  ] table[col sep=comma] {data/\inputname/data.txt};

  \addplot[%
    mark=none,
    darkgray!40!Goldenrod,
    line width=2.5pt
  ] table[col sep=comma] {data/\inputname/xy_\row.txt};

  \end{axis}
  }

\end{tikzpicture}
\end{document}